<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <ul>
        <li></li>
    </ul>
    <script>
        const people = [
            {
                name: '卡斯伯',
                order: '鍋燒意麵',
                price: 80
            },
            {
                name: '小明',
                order: '牛肉麵',
                price: 120
            },
            {
                name: '漂亮阿姨',
                order: '滷味切盤',
                price: 40
            },
            {
                name: 'Ray',
                order: '大麻將乾麵',
                price: 60
            },
        ]

        // 1. 請一一列出每個人的訂單
        // people.forEach(function(obj, key) {
        //     console.log(obj, key);
        // });


        // 2. 小明看到今天有打八折！請將所有訂單新增一個新價格，金額是 80%
        // const newOrders = [];
        // people.forEach(function(obj, key) {
        //     // newOrders.push(obj);
        //     newOrders[key] = {
        //         ...obj,
        //         newPrice: obj.price * 0.8
        //     }
        // });
        // console.log(newOrders);

        // map
        // const newOrders = people.map(function(item, index) {
        //     return {
        //         ...item,
        //         newPrice: item.price * 0.8
        //     }
        // })
        // console.log(newOrders);

        // 箭頭函示
        const newOrders = people.map((item, index) => ({
            ...item,
            newPrice: item.price * 0.8
        }));
        // console.log(newOrders);


        // 3. 老闆說，今天疫情沒有八折啦，不過 80 元可以給滷蛋
        // const newOrders2 = [];
        // people.forEach(function(item, index) {
        //     if (item.price >= 80) {
        //         newOrders2.push(item)
        //     }
        // });
        // console.log(newOrders2);

        // filter
        // const newOrders2 = people.filter(function(item, index) {
        //     return item.price >= 80;  // 為真的，就會回傳該物件
        // });

        // 箭頭
        const newOrders2 = people.filter((item) => item.price >= 80)
        // console.log(newOrders2);


        // 4. 過一段時間後，老闆發現牛肉沒了，把點牛肉麵的換成牛肉湯麵
        // let index = -1;  // let 會讓值被調整，前一個 const 陣列沒有被調整。另 -1 不再陣列裡
        // people.forEach(function(obj, key) {
        //     if (obj.order === '牛肉麵') {
        //         index = key;  // key 不是變數
        //         obj.order = '牛肉湯麵'
        //     }
        // });
        // people[index].order = '牛肉湯麵'
        // console.log(people);

        // findIndex
        // const index = people.findIndex(function(item) {
        //     return item.order === '牛肉麵'
        // });
        // people[index].order = '牛肉湯麵'

        // 箭頭
        const index = people.findIndex((item) => item.order === '牛肉麵')
        people[index].order = '牛肉湯麵'
        // console.log(people);


        // 5. 老闆說 POS 機壞了，麻煩幫忙出一下 Li 結構，方便列印發票
        // let htmlTemplate = '';
        // people.forEach(function(obj, key) {
        //     // 樣板字面值
        //     htmlTemplate = htmlTemplate + `<li>
        //             ${obj.order}, ${obj.price}
        //         </li>`;
        // });
        // console.log(htmlTemplate);

        // join
        // const htmlTemplate = people.map(function(item, index) {
        //     return `<li>
        //         ${item.order}, ${item.price}
        //     </li>`;
        // }).join('');

        // 箭頭
        const htmlTemplate = people.map((item) => `<li>
            ${item.order}, ${item.price}
        </li>`).join('');
        // console.log(htmlTemplate);


        // 6. 老闆要收錢了，請問老闆應該收多少錢
        // let total = 0;
        // people.forEach(function(obj, key) {
        //     total += obj.price;
        // });

        // reduce
        // let total = people.reduce(function(acc, cur) {
        //     console.log(acc);
        //     return acc + cur.price;
        // }, 0);  // 起始值

        // 箭頭
        let total = people.reduce((acc, cur) => acc + cur.price, 0);
        // console.log(total);


        // 7. 今天誰吃最貴！請排序所有金額
        const peopleSort = people.sort((a, b) => {
            // console.log(a.price - b.price);
            return a.price - b.price  // 產生新數值，針對新數值進行排序
        });
        console.log(peopleSort);

    </script>
</body>
</html>